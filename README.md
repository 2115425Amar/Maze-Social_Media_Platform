# README

This README would normally document whatever steps are necessary to get the
application up and running.

Things you may want to cover:

* Ruby version

* System dependencies

* Configuration

* Database creation

* Database initialization

* How to run the test suite

* Services (job queues, cache servers, search engines, etc.)

* Deployment instructions



Here are the URLs generated by your Rails routes file:

---

### FEATURES

- Users can create posts, comment on posts, and like both posts and comments.
- Roles define user permissions (e.g., Admin, User, etc.).
- Polymorphic associations allow likes to be attached to multiple models.
- Cloudinary is used for avatar image uploads.
- Devise handles user authentication.
- Rolify manages roles and permissions.


Your application uses multiple **associations** (`has_many`, `belongs_to`, `has_and_belongs_to_many`, `polymorphic`). Hereâ€™s how the **database schema** and **relationship tables** would look based on your models.

---

# **ðŸ”¹ 1. Users Table (`users`)**
This table stores **user details**.

| Column Name     | Data Type    | Constraints |
|----------------|-------------|-------------|
| id             | integer (PK) | Primary Key |
| first_name     | string       | NOT NULL    |
| last_name      | string       | NOT NULL    |
| email          | string       | UNIQUE, NOT NULL |
| phone_number   | string       | UNIQUE, NOT NULL |
| encrypted_password | string   | NOT NULL (Managed by Devise) |
| avatar_public_id | string    | Nullable (Cloudinary Avatar ID) |
| active         | boolean      | Default: `true` |
| created_at     | timestamp    | Auto-generated |
| updated_at     | timestamp    | Auto-generated |

- **Primary Key:** `id`
- **Associations:**
  - `has_many :posts`
  - `has_many :likes`
  - `has_many :comments, through: :posts`
  - `has_and_belongs_to_many :roles`

---

# **ðŸ”¹ 2. Roles Table (`roles`)**
This table defines **different roles** (Admin, User, etc.).

| Column Name | Data Type    | Constraints |
|------------|-------------|-------------|
| id         | integer (PK) | Primary Key |
| name       | string       | NOT NULL (e.g., "admin", "user") |
| created_at | timestamp    | Auto-generated |
| updated_at | timestamp    | Auto-generated |

- **Primary Key:** `id`
- **Associations:**  
  - `has_and_belongs_to_many :users`

---

# **ðŸ”¹ 3. Users Roles Join Table (`users_roles`)**
This is a **join table** that links users to their roles (**Many-to-Many** relationship).

| Column Name | Data Type    | Constraints |
|------------|-------------|-------------|
| user_id    | integer (FK) | Foreign Key to `users.id` |
| role_id    | integer (FK) | Foreign Key to `roles.id` |

- **Primary Keys:** `user_id`, `role_id` (Composite Key)
- **Associations:**  
  - `belongs_to :user`
  - `belongs_to :role`

---

# **ðŸ”¹ 4. Posts Table (`posts`)**
Stores **user-created posts**.

| Column Name  | Data Type    | Constraints |
|-------------|-------------|-------------|
| id          | integer (PK) | Primary Key |
| user_id     | integer (FK) | Foreign Key to `users.id` |
| description | text         | NOT NULL    |
| created_at  | timestamp    | Auto-generated |
| updated_at  | timestamp    | Auto-generated |

- **Primary Key:** `id`
- **Associations:**  
  - `belongs_to :user`
  - `has_many :comments`
  - `has_many :likes, as: :likeable`

---

# **ðŸ”¹ 5. Comments Table (`comments`)**
Stores **comments on posts**.

| Column Name  | Data Type    | Constraints |
|-------------|-------------|-------------|
| id          | integer (PK) | Primary Key |
| user_id     | integer (FK) | Foreign Key to `users.id` |
| post_id     | integer (FK) | Foreign Key to `posts.id` |
| content     | text         | NOT NULL    |
| created_at  | timestamp    | Auto-generated |
| updated_at  | timestamp    | Auto-generated |

- **Primary Key:** `id`
- **Associations:**  
  - `belongs_to :user`
  - `belongs_to :post`
  - `has_many :likes, as: :likeable`

---

# **ðŸ”¹ 6. Likes Table (`likes`)**
Tracks **likes on posts and comments** (Polymorphic Association).

| Column Name  | Data Type    | Constraints |
|-------------|-------------|-------------|
| id          | integer (PK) | Primary Key |
| user_id     | integer (FK) | Foreign Key to `users.id` |
| likeable_id | integer (FK) | Foreign Key to either `posts.id` or `comments.id` |
| likeable_type | string     | Either "Post" or "Comment" |
| created_at  | timestamp    | Auto-generated |
| updated_at  | timestamp    | Auto-generated |

- **Primary Key:** `id`
- **Associations:**  
  - `belongs_to :user`
  - `belongs_to :likeable, polymorphic: true`

### **ðŸ”¹ Example Polymorphic Data**
| id | user_id | likeable_id | likeable_type |
|----|--------|------------|--------------|
| 1  | 101    | 50         | "Post"       |
| 2  | 102    | 80         | "Comment"    |

- Like **ID 1** is for **Post ID 50**.
- Like **ID 2** is for **Comment ID 80**.

---

# **ðŸ”¹ ERD (Entity-Relationship Diagram)**

```plaintext
+-------------------+       +--------------------+
|       users      |       |       roles        |
+-------------------+       +--------------------+
| id (PK)          |       | id (PK)           |
| first_name       |       | name              |
| last_name        |       | created_at        |
| email (unique)   |       | updated_at        |
| phone_number     |       +--------------------+
| active          |
+-------------------+
        |  
        | has_and_belongs_to_many
        v  
+-------------------+
|   users_roles    |
+-------------------+
| user_id (FK)     |
| role_id (FK)     |
+-------------------+

+-------------------+       +--------------------+
|      posts       |       |      comments      |
+-------------------+       +--------------------+
| id (PK)          |       | id (PK)           |
| user_id (FK)     |       | user_id (FK)      |
| description      |       | post_id (FK)      |
| created_at       |       | content           |
+-------------------+       +--------------------+
        |  
        | has_many
        v  
+-------------------+
|      likes       |
+-------------------+
| id (PK)          |
| user_id (FK)     |
| likeable_id (FK) |
| likeable_type    |
+-------------------+

```

---

# **ðŸ”¹ Summary**
âœ… **One-to-Many Relations:**
- `User â†’ has_many â†’ Posts`
- `User â†’ has_many â†’ Likes`
- `User â†’ has_many â†’ Comments (through Posts)`

âœ… **Many-to-Many Relations:**
- `Users <-> Roles` (via `users_roles` table)

âœ… **Polymorphic Relations:**
- `Like â†’ belongs_to â†’ likeable (either Post or Comment)`

---

### **ðŸš€ Now you can easily visualize how tables are linked in the database. Let me know if you need any modifications or queries!** ðŸš€



### **Authentication (Devise)**
1. **User Registration**:
   - Sign up: `/users/sign_up` (GET)
   - Create user: `/users` (POST)

2. **User Sessions**:
   - Login: `/users/sign_in` (GET)
   - Create session: `/users/sign_in` (POST)
   - Logout: `/users/sign_out` (DELETE)

---

### **Posts**
1. **Posts**:
   - List all posts: `/posts` (GET)
   - Create a new post: `/posts` (POST)
   - Show a specific post: `/posts/:id` (GET)
   - Edit a post: `/posts/:id/edit` (GET)
   - Update a post: `/posts/:id` (PATCH/PUT)
   - Delete a post: `/posts/:id` (DELETE)

2. **Comments on Posts**:
   - Create a comment: `/posts/:post_id/comments` (POST)
   - Delete a comment: `/posts/:post_id/comments/:id` (DELETE)

3. **Likes on Posts**:
   - Like a post: `/posts/:post_id/likes` (POST)
   - Unlike a post: `/posts/:post_id/likes/:id` (DELETE)

---

### **Comments**
1. **Likes on Comments**:
   - Like a comment: `/comments/:comment_id/likes` (POST)
   - Unlike a comment: `/comments/:comment_id/likes/:id` (DELETE)

---

### **Profile**
1. **User Profile**:
   - View profile: `/profile` (GET)

---

### **Reports**
1. **Reports**:
   - List reports: `/reports` (GET)
   - Download report: `/reports/download_report` (GET)

---

### **Manage Users**
1. **Manage Users**:
   - List users: `/manage_users` (GET)
   - Create a new user: `/manage_users` (POST)
   - Toggle user status: `/manage_users/:id/toggle_status` (PATCH)

2. **Bulk Upload**:
   - Show upload form: `/manage_users/upload` (GET)
   - Upload users: `/manage_users/upload_users` (POST)

---

### **Home**
1. **Home**:
   - Root: `/` (GET)
   - Landing page: `/landing` (GET)

---

### **Sidekiq**
1. **Sidekiq Web UI**:
   - Access Sidekiq dashboard: `/sidekiq` (GET)

---

### **Summary of URLs**
| **URL**                              | **HTTP Method** | **Controller#Action**           |
|--------------------------------------|-----------------|---------------------------------|
| `/users/sign_up`                     | GET             | `users/registrations#new`       |
| `/users`                             | POST            | `users/registrations#create`    |
| `/users/sign_in`                     | GET             | `users/sessions#new`            |
| `/users/sign_in`                     | POST            | `users/sessions#create`         |
| `/users/sign_out`                    | DELETE          | `users/sessions#destroy`        |
| `/posts`                             | GET             | `posts#index`                   |
| `/posts`                             | POST            | `posts#create`                  |
| `/posts/:id`                         | GET             | `posts#show`                    |
| `/posts/:id/edit`                    | GET             | `posts#edit`                    |
| `/posts/:id`                         | PATCH/PUT       | `posts#update`                  |
| `/posts/:id`                         | DELETE          | `posts#destroy`                 |
| `/posts/:post_id/comments`           | POST            | `comments#create`               |
| `/posts/:post_id/comments/:id`       | DELETE          | `comments#destroy`              |
| `/posts/:post_id/likes`              | POST            | `likes#create`                  |
| `/posts/:post_id/likes/:id`          | DELETE          | `likes#destroy`                 |
| `/comments/:comment_id/likes`        | POST            | `likes#create`                  |
| `/comments/:comment_id/likes/:id`    | DELETE          | `likes#destroy`                 |
| `/profile`                           | GET             | `users#profile`                 |
| `/reports`                           | GET             | `reports#index`                 |
| `/reports/download_report`           | GET             | `reports#download_report`       |
| `/manage_users`                      | GET             | `manage_users#index`            |
| `/manage_users`                      | POST            | `manage_users#create`           |
| `/manage_users/:id/toggle_status`    | PATCH           | `manage_users#toggle_status`    |
| `/manage_users/upload`               | GET             | `manage_users#upload`           |
| `/manage_users/upload_users`         | POST            | `manage_users#upload_users`     |
| `/`                                 | GET             | `home#index`                    |
| `/landing`                           | GET             | `home#landing`                  |
| `/sidekiq`                           | GET             | `Sidekiq::Web`                  |

---

This table provides a clear overview of all the URLs, their corresponding HTTP methods, and the controller actions they map to. Let me know if you need further clarification!